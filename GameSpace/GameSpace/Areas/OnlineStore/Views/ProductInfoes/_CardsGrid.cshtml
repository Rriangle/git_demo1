@model IEnumerable<dynamic>
<!--同樣用 data-modal-url 開 Modal-->
<div class="row row-cols-1 row-cols-sm-2 row-cols-lg-3 g-3">
    @foreach (var x in Model)
    {
        <div class="col">
            <div class="card h-100 shadow-sm">
                <img src="@(x.ImageUrl ?? "/images/no-image.png")" class="card-img-top" alt="@x.ProductName" style="object-fit:cover;height:180px;">
                <div class="card-body d-flex flex-column">
                    <h5 class="card-title text-truncate" title="@x.ProductName">@x.ProductName</h5>
                    <div class="mb-1 text-muted small">@x.ProductType</div>
                    <div class="fw-bold mb-2">@x.Price.ToString("N0")</div>
                    <div class="mb-2">
                        @if (x.IsActive)
                        {
                            <span class="badge bg-success">上架</span>
                        }
                        else
                        {

                            <span class="badge bg-secondary">下架</span>
                        }
                        <span class="text-muted small ms-2">
                            最後異動：@(x.LastChangedAt?.ToString("yyyy/MM/dd HH:mm") ?? "—")
                        </span>
                    </div>
                    <div class="mt-auto d-flex gap-2">
                        <a href="javascript:;" class="text-info" data-modal-url="@Url.Action("DetailPanel", "ProductInfoes", new { area = "OnlineStore", id = (int)x.ProductId })" title="詳細">
                            <i class="bi bi-card-text"></i>
                        </a>
                        <a href="javascript:;" class="text-primary" data-modal-url="@Url.Action("Edit", "ProductInfoes", new { area = "OnlineStore", id = (int)x.ProductId })" title="編輯">
                            <i class="bi bi-pencil-square"></i>
                        </a>
                        <a href="javascript:;" class="text-danger" data-modal-url="@Url.Action("Delete", "ProductInfoes", new { area = "OnlineStore", id = (int)x.ProductId })" title="下架">
                            <i class="bi bi-trash"></i>
                        </a>
                        <a href="javascript:;" class="text-secondary" data-modal-url="@Url.Action("AuditLog", "ProductInfoes", new { area = "OnlineStore", id = (int)x.ProductId })" title="異動紀錄">
                            <i class="bi bi-clock-history"></i>
                        </a>
                    </div>
                </div>
            </div>
        </div>
    }
</div>
